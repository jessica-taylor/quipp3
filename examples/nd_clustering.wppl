
var repeat = function(n, fn) {
  return n == 0 ? [] : append(repeat(n - 1, fn), [fn(n-1)]);
};


var nclusters = 3;
var dim = 2;

var n = 100;

testParamInference(function(randFunction) {
  var pointType = Vector(dim, Double);
  var getPoint = randFunction(Categorical(nclusters), pointType);
  return function() {
    return repeat(n, function(i) {
      var cluster = randomInteger(nclusters);
      return observe('point' + i, getPoint, cluster);
    });
  };
});
